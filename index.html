<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular Medicina Veterinaria USS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
    }
    .semester {
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .semester h2 {
      font-size: 16px;
      text-align: center;
      background: #333;
      color: #fff;
      border-radius: 4px;
      padding: 4px;
    }
    .subject {
      background: #a88ad7; /* Disponible: morado suave */
      margin: 5px 0;
      padding: 5px;
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      transition: opacity 0.3s;
    }
    .subject.approved {
      background: #f6c1d1; /* Aprobado: rosado suave */
      text-decoration: line-through;
    }
    .subject.blocked {
      background: #a1d8eb; /* Bloqueado: celeste suave */
      cursor: not-allowed;
      opacity: 0.7;
    }
    .subject:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 105%;
      top: 50%;
      transform: translateY(-50%);
      background: #333;
      color: #fff;
      padding: 4px 6px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Medicina Veterinaria USS</h1>
  <div class="grid" id="grid"></div>

  <script>
    const semesters = [
      {
        name: "Semestre 1",
        subjects: [
          { code: "ASIGESAP01", name: "Estrategias para el Aprendizaje", reqs: [] },
          { code: "DBIO1069", name: "Biología Celular", reqs: [] },
          { code: "DMAEM001", name: "Matemática", reqs: [] },
          { code: "DQUI1035", name: "Química General y Orgánica", reqs: [] },
          { code: "MEVE0120", name: "Orientación Profesional", reqs: [] },
          { code: "MEVE0002", name: "Física Médica", reqs: [] },
        ]
      },
      {
        name: "Semestre 2",
        subjects: [
          { code: "DBIO1076", name: "Bioquímica General", reqs: ["DBIO1069", "DQUI1035"] },
          { code: "MEVEB001", name: "Histología Veterinaria", reqs: ["DBIO1069"] },
          { code: "MEVEB002", name: "Bienestar Animal", reqs: ["MEVE0120"] },
          { code: "MEVE0005", name: "Zoología Veterinaria", reqs: [] },
          { code: "MEVE0007", name: "Anatomía Veterinaria I", reqs: ["DBIO1069"] },
          { code: "MEVE0121", name: "Inglés Instrumental I", reqs: [] },
        ]
      },
      {
        name: "Semestre 3",
        subjects: [
          { code: "FILS0001", name: "Antropología", reqs: [] },
          { code: "DBIO1031", name: "Ecología", reqs: ["MEVE0005"] },
          { code: "MEVE0010", name: "Fisiología Animal", reqs: ["DBIO1076","MEVEB001","MEVEB002"] },
          { code: "MEVE0011", name: "Anatomía Veterinaria II", reqs: ["MEVE0007"] },
          { code: "MEVE0012", name: "Microbiología General", reqs: ["DBIO1076"] },
          { code: "MEVE0017", name: "Inmunología Veterinaria", reqs: ["MEVEB001","MEVEB002"] },
          { code: "MEVE0018", name: "Genética Ganadera", reqs: ["DMAEM001"] },
          { code: "MEVE0122", name: "Inglés Instrumental II", reqs: ["MEVE0121"] },
          { code: "MEVE0097", name: "Pasantía Intrahospitalaria I", reqs: [] },
          { code: "MEVE0099", name: "Pasantía Intrahospitalaria II", reqs: ["MEVE0097"] },
        ]
      },
      {
        name: "Semestre 4",
        subjects: [
          { code: "FILS0002", name: "Ética", reqs: ["FILS0001"] },
          { code: "MEVE0009", name: "Producción de Forrajes", reqs: ["DBIO1031"] },
          { code: "MEVE0015", name: "Fisiopatología Animal", reqs: ["MEVE0010","MEVE0017"] },
          { code: "MEVE0020", name: "Reproducción Animal", reqs: ["MEVE0010","MEVE0011"] },
          { code: "MEVE0027", name: "Enfermedades Parasitarias", reqs: ["MEVE0005"] },
          { code: "MEVE0028", name: "Enfermedades Infecciosas", reqs: ["MEVE0012"] },
          { code: "MEVE0082", name: "Patología General", reqs: ["MEVE0007"] },
          { code: "MEVE0101", name: "Pasantía Intrahospitalaria III", reqs: ["MEVE0099"] },
          { code: "MEVE0103", name: "Pasantía Intrahospitalaria IV", reqs: ["MEVE0101"] },
        ]
      },
      {
        name: "Semestre 5",
        subjects: [
          { code: "ELEFORIN01", name: "Electivo de Formación Integral", reqs: ["FILS0002"] },
          { code: "MEVE0019", name: "Nutrición y Alimentación Animal", reqs: ["MEVE0009"] },
          { code: "MEVE0021", name: "Patología Especial de Sistemas", reqs: ["MEVE0082"] },
          { code: "MEVE0022", name: "Farmacología Veterinaria I", reqs: ["MEVE0015","MEVE0028"] },
          { code: "MEVE0024", name: "Andrología", reqs: ["MEVE0020"] },
          { code: "MEVE0036", name: "Sistema de Producción de Carne", reqs: ["MEVE0009"] },
          { code: "MEVE0046", name: "Economía", reqs: ["DMAEM001"] },
          { code: "MEVE0104", name: "Pasantía Intrahospitalaria V", reqs: ["MEVE0103"] },
          { code: "MEVE0105", name: "Pasantía Intrahospitalaria VI", reqs: ["MEVE0104"] },
        ]
      },
      {
        name: "Semestre 6",
        subjects: [
          { code: "MEVE0025", name: "Cirugía General y Patología Quirúrgica", reqs: ["MEVE0021","MEVE0022"] },
          { code: "MEVE0026", name: "Farmacología Veterinaria II", reqs: ["MEVE0022"] },
          { code: "MEVE0030", name: "Sistemas de Producción de Leche", reqs: ["MEVE0018","MEVE0020","MEVE0019"] },
          { code: "MEVE0088", name: "Tecnología de la Carne", reqs: ["MEVE0024"] },
          { code: "MEVE0124", name: "Ginecología y Obstetricia", reqs: ["MEVE0020"] },
          { code: "MEVE0125", name: "Contabilidad y Administración", reqs: ["DMAEM001"] },
          { code: "MEVE0106", name: "Pasantía Intrahospitalaria VII", reqs: ["MEVE0105"] },
          { code: "MEVE0107", name: "Pasantía Intrahospitalaria VIII", reqs: ["MEVE0106"] },
        ]
      },
      {
        name: "Semestre 7",
        subjects: [
          { code: "MEVE0029", name: "Cirugía Especial", reqs: ["MEVE0025","MEVE0026"] },
          { code: "MEVE0032", name: "Exploración Clínica de los Animales", reqs: ["MEVE0021","MEVE0124"] },
          { code: "MEVE0049", name: "Análisis Estadístico", reqs: ["MEVE0125"] },
          { code: "MEVE0058", name: "Sistemas de Producción de Peces", reqs: ["MEVE0019"] },
          { code: "MEVE0059", name: "Tecnología de la Leche", reqs: ["MEVE0030","MEVE0088"] },
          { code: "MEVE0126", name: "Conservación de la Vida Silvestre", reqs: ["DBIO1031"] },
          { code: "MEVE0108", name: "Pasantía Intrahospitalaria IX", reqs: ["MEVE0107"] },
          { code: "MEVE0109", name: "Pasantía Intrahospitalaria X", reqs: ["MEVE0108"] },
        ]
      },
      {
        name: "Semestre 8",
        subjects: [
          { code: "MEVE0031", name: "Toxicología Veterinaria", reqs: ["MEVE0025"] },
          { code: "MEVE0035", name: "Complementarios de Diagnóstico", reqs: ["MEVE0032"] },
          { code: "MEVE0034", name: "Medicina Interna", reqs: ["MEVE0032","MEVE0049"] },
          { code: "MEVE0037", name: "Metodología de la Investigación", reqs: ["MEVE0049"] },
          { code: "MEVE0045", name: "Epidemiología y Salud Pública", reqs: [] },
          { code: "MEVE0127", name: "Formulación y Evaluación de Proyectos", reqs: ["MEVE0125"] },
          { code: "MEVE0110", name: "Pasantía Intrahospitalaria XI", reqs: ["MEVE0109"] },
          { code: "MEVE0111", name: "Pasantía Intrahospitalaria XII", reqs: ["MEVE0110"] },
        ]
      },
      {
        name: "Semestre 9",
        subjects: [
          { code: "MEVE0044", name: "Clínica de Animales Silvestres y Exóticos", reqs: ["MEVE0031","MEVE0034","MEVE0035"] },
          { code: "MEVE0056", name: "Clínica de Equinos y Rumiantes", reqs: ["MEVE0031","MEVE0034","MEVE0035"] },
          { code: "MEVE0057", name: "Clínica de Animales de Compañía", reqs: ["MEVE0031","MEVE0034","MEVE0035"] },
          { code: "MEVE0090", name: "Memoria de Título", reqs: ["MEVE0037"] },
          { code: "MEVE0092", name: "Inocuidad de los Alimentos", reqs: ["MEVE0045"] },
          { code: "MEVE0137", name: "Pasantía Intrahospitalaria XIII", reqs: ["MEVE0111"] },
          { code: "MEVE0138", name: "Pasantía Intrahospitalaria XIV", reqs: ["MEVE0137"] },
          { code: "MEVE0139", name: "Turno Hospitalario I", reqs: [] },
        ]
      },
      {
        name: "Semestre 10",
        subjects: [
          { code: "ELEMVE01", name: "Electivo I", reqs: [] },
          { code: "ELEMVE02", name: "Electivo II", reqs: [] },
          { code: "ELEMVE03", name: "Electivo III", reqs: [] },
          { code: "MEVE0128", name: "Internado", reqs: ["MEVE0044","MEVE0056","MEVE0057"] },
          { code: "MEVE0140", name: "Turno Hospitalario II", reqs: ["MEVE0138"] },
        ]
      },
    ];

    const grid = document.getElementById('grid');
    const approved = JSON.parse(localStorage.getItem('approved')) || [];

    function render() {
      grid.innerHTML = '';
      semesters.forEach((semester) => {
        const sem = document.createElement('div');
        sem.className = 'semester';
        sem.innerHTML = `<h2>${semester.name}</h2>`;
        semester.subjects.forEach(sub => {
          const div = document.createElement('div');
          div.className = 'subject';
          div.textContent = `${sub.code} – ${sub.name}`;
          div.dataset.code = sub.code;
          div.dataset.tooltip = '';
          if (approved.includes(sub.code)) {
            div.classList.add('approved');
          } else if (sub.reqs.some(r => !approved.includes(r))) {
            div.classList.add('blocked');
            div.dataset.tooltip = 'Faltan: ' + sub.reqs.filter(r => !approved.includes(r)).join(', ');
          }
          div.onclick = () => {
            if (div.classList.contains('blocked')) return;
            if (approved.includes(sub.code)) {
              approved.splice(approved.indexOf(sub.code), 1);
            } else {
              approved.push(sub.code);
            }
            localStorage.setItem('approved', JSON.stringify(approved));
            render();
          };
          sem.appendChild(div);
        });
        grid.appendChild(sem);
      });
    }

    render();
  </script>
</body>
</html>
